import clsx from "clsx";
import { useSettings } from "../../../contexts/SettingsContext";
import { useState } from "react";
import { useNuiEvent } from "../../../hooks/useNuiEvent";

const SpeedoMeter2 = ({ gear, speed, fuel }) => {
  const { settings } = useSettings();

  const [seatBelts, setSeatBelts] = useState({
    seat_1: false,
    seat_2: false,
    seat_3: false,
    seat_4: false,
  });

  useNuiEvent("setSeatBelts", setSeatBelts);

  return (
    <div
      className="w-56 relative h-56 flex flex-col items-start justify-between p-3 bg-red-50"
      style={{
        scale: settings.speedometers.transform ? settings.speedometers.transform.toString() + "%" : '90%',
      }}
    >
      <svg
        className="absolute -bottom-[0.5px] -right-[0.5px]"
        width="55"
        height="52"
        viewBox="0 0 55 52"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M54 1.5L2 51H19.5L54 17V1.5Z" fill="black" stroke="black" />
      </svg>
      <div className="flex items-center justify-center gap-x-2">
        <svg
          width="12"
          height="14"
          viewBox="0 0 12 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.89836 0.928105H6.54782C6.67525 0.927698 6.80149 0.952626 6.91921 1.00144C7.03692 1.05025 7.14376 1.12198 7.23351 1.21244L7.86039 1.83751L8.48787 1.21244C8.66977 1.03067 8.9164 0.928555 9.17356 0.928555C9.43072 0.928555 9.67735 1.03067 9.85925 1.21244L11.3143 2.66749C11.4961 2.84938 11.5982 3.09602 11.5982 3.35317C11.5982 3.61033 11.4961 3.85696 11.3143 4.03886L10.6892 4.66635L11.3143 5.29323C11.4048 5.38298 11.4765 5.48981 11.5253 5.60753C11.5741 5.72524 11.599 5.85148 11.5986 5.97892V12.5684C11.5986 12.8257 11.4964 13.0724 11.3145 13.2543C11.1326 13.4363 10.8859 13.5385 10.6286 13.5385H1.89836C1.64109 13.5385 1.39436 13.4363 1.21244 13.2543C1.03053 13.0724 0.92833 12.8257 0.92833 12.5684V1.89813C0.92833 1.64087 1.03053 1.39414 1.21244 1.21222C1.39436 1.0303 1.64109 0.928105 1.89836 0.928105ZM10.6286 3.35317L9.17356 1.89813L8.54668 2.52501L10.0017 3.98005L10.6286 3.35317ZM3.06239 10.7254C3.01144 10.7636 2.96851 10.8115 2.93606 10.8663C2.90361 10.9211 2.88227 10.9817 2.87326 11.0448C2.86425 11.1079 2.86775 11.1721 2.88356 11.2338C2.89937 11.2955 2.92717 11.3534 2.96539 11.4044C3.0036 11.4554 3.05148 11.4983 3.10629 11.5307C3.16109 11.5632 3.22175 11.5845 3.28481 11.5935C3.34786 11.6025 3.41207 11.599 3.47377 11.5832C3.53547 11.5674 3.59345 11.5396 3.64441 11.5014L6.26348 9.5371L8.88255 11.5014C8.98546 11.5786 9.11481 11.6117 9.24215 11.5935C9.36949 11.5753 9.48439 11.5073 9.56157 11.4044C9.63875 11.3015 9.67189 11.1721 9.6537 11.0448C9.63551 10.9175 9.56748 10.8026 9.46457 10.7254L7.07163 8.93083L9.46457 7.13628C9.56748 7.0591 9.63551 6.9442 9.6537 6.81686C9.67189 6.68952 9.63875 6.56017 9.56157 6.45726C9.48439 6.35435 9.36949 6.28632 9.24215 6.26813C9.11481 6.24994 8.98546 6.28308 8.88255 6.36026L6.26348 8.32456L3.64441 6.36026C3.5415 6.28308 3.41215 6.24994 3.28481 6.26813C3.15747 6.28632 3.04257 6.35435 2.96539 6.45726C2.88821 6.56017 2.85507 6.68952 2.87326 6.81686C2.89145 6.9442 2.95948 7.0591 3.06239 7.13628L5.45532 8.93083L3.06239 10.7254ZM3.3534 3.83819H5.77847C5.9071 3.83819 6.03046 3.78709 6.12142 3.69613C6.21238 3.60517 6.26348 3.48181 6.26348 3.35317C6.26348 3.22454 6.21238 3.10117 6.12142 3.01022C6.03046 2.91926 5.9071 2.86816 5.77847 2.86816H3.3534C3.22476 2.86816 3.1014 2.91926 3.01044 3.01022C2.91948 3.10117 2.86838 3.22454 2.86838 3.35317C2.86838 3.48181 2.91948 3.60517 3.01044 3.69613C3.1014 3.78709 3.22476 3.83819 3.3534 3.83819Z"
            fill="black"
          />
        </svg>

        <div className="w-[186.14px] h-[7.11px] relative">
          <div className="absolute w-full h-full bg-black bg-opacity-20" />
          <div
            className="absolute h-full bg-black"
            style={{ width: fuel + "%" }}
          />
        </div>
      </div>
      <div className="flex flex-col w-full items-center justify-center gap-y-3">
        <div className="flex items-center gap-x-2">
          <svg
            width="13"
            height="17"
            viewBox="0 0 13 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.349 9.80502C11.4788 9.3752 11.2274 8.92104 10.7975 8.79939C10.7164 8.77506 10.6434 8.75073 10.5624 8.73452C10.5542 8.01273 10.4083 7.31528 10.1406 6.68271L5.73696 9.82935C7.28595 9.74014 8.84305 9.91045 10.3434 10.3565C10.7732 10.4781 11.2274 10.2348 11.349 9.80502ZM7.95202 16.1839C8.01138 16.1974 8.07156 16.2037 8.13019 16.2037C8.50163 16.2037 8.83583 15.9479 8.92058 15.5701L9.73157 11.9555C9.8203 11.5595 9.60327 11.1596 9.22308 11.0178C7.47118 10.3668 5.54354 10.3668 3.79164 11.0178C3.41144 11.1595 3.1945 11.5595 3.28315 11.9555L4.09414 15.5701C4.19235 16.008 4.62793 16.2837 5.0627 16.1839C5.49991 16.0857 5.77467 15.6524 5.67646 15.2153L5.02937 12.3293C6.00507 12.0854 7.00932 12.0854 7.98502 12.3293L7.33794 15.2153C7.23997 15.6525 7.51481 16.0857 7.95202 16.1839ZM0.173566 11.8082C0.327654 12.0271 0.579061 12.1488 0.830468 12.1488C0.992666 12.1488 1.16297 12.1001 1.30084 11.9947L12.6547 3.88479C13.0197 3.62528 13.1007 3.12246 12.8412 2.75752C12.5817 2.39257 12.0789 2.31147 11.714 2.57099L8.64841 4.76066C8.59229 4.7176 8.53228 4.68394 8.47438 4.6451C8.7643 4.24463 8.94037 3.75723 8.94037 3.22789C8.94037 1.88976 7.84553 0.794922 6.5074 0.794922C5.16927 0.794922 4.07443 1.88976 4.07443 3.22789C4.07443 3.75974 4.25244 4.24901 4.54488 4.65053C3.45564 5.36518 2.66728 6.64305 2.493 8.15871C2.46867 8.34524 2.45245 8.53988 2.45245 8.73452C2.37135 8.75073 2.29836 8.77506 2.21726 8.79939C1.80366 8.91293 1.55225 9.34276 1.65768 9.75636L0.360094 10.6809C-0.0048516 10.9404 -0.0859506 11.4432 0.173566 11.8082Z"
              fill={
                Object.values(seatBelts).some((p) => p === true)
                  ? "#040F0A"
                  : "#898989"
              }
            />
          </svg>
          <svg
            width="18"
            height="14"
            viewBox="0 0 18 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M17.8028 10.2877V5.95961C17.8028 5.81612 17.7458 5.67851 17.6443 5.57705C17.5429 5.47559 17.4052 5.41859 17.2618 5.41859C17.1183 5.41859 16.9807 5.47559 16.8792 5.57705C16.7777 5.67851 16.7207 5.81612 16.7207 5.95961V7.58266H15.6387V6.50062C15.6387 6.21365 15.5247 5.93843 15.3218 5.73551C15.1189 5.53259 14.8436 5.41859 14.5567 5.41859H13.6985L11.8098 3.52987L5.69137 13.4441L5.70998 13.452C5.84128 13.5065 5.9821 13.5343 6.12425 13.5338H10.5457C10.6879 13.5343 10.8287 13.5065 10.96 13.452C11.0913 13.3976 11.2105 13.3176 11.3106 13.2167L13.6985 10.8288H14.5567C14.8436 10.8288 15.1189 10.7148 15.3218 10.5118C15.5247 10.3089 15.6387 10.0337 15.6387 9.74672V8.66469H16.7207V10.2877C16.7207 10.4312 16.7777 10.5688 16.8792 10.6703C16.9807 10.7718 17.1183 10.8288 17.2618 10.8288C17.4052 10.8288 17.5429 10.7718 17.6443 10.6703C17.7458 10.5688 17.8028 10.4312 17.8028 10.2877ZM4.65504 12.5123L10.696 2.7236C10.6463 2.71673 10.5961 2.71334 10.5457 2.71351H9.1465V1.63147H10.7696C10.913 1.63147 11.0506 1.57447 11.1521 1.47301C11.2536 1.37155 11.3106 1.23394 11.3106 1.09046C11.3106 0.946969 11.2536 0.809359 11.1521 0.707899C11.0506 0.606438 10.913 0.549438 10.7696 0.549438H6.44142C6.29793 0.549438 6.16032 0.606438 6.05886 0.707899C5.9574 0.809359 5.9004 0.946969 5.9004 1.09046C5.9004 1.23394 5.9574 1.37155 6.05886 1.47301C6.16032 1.57447 6.29793 1.63147 6.44142 1.63147H8.06447V2.71351H3.73634C3.44936 2.71351 3.17414 2.82751 2.97122 3.03043C2.7683 3.23335 2.6543 3.50857 2.6543 3.79554V7.58266H1.57227V5.95961C1.57227 5.81612 1.51527 5.67851 1.41381 5.57705C1.31235 5.47559 1.17474 5.41859 1.03125 5.41859C0.887765 5.41859 0.750155 5.47559 0.648695 5.57705C0.547234 5.67851 0.490234 5.81612 0.490234 5.95961V10.2877C0.490234 10.4312 0.547234 10.5688 0.648695 10.6703C0.750155 10.7718 0.887765 10.8288 1.03125 10.8288C1.17474 10.8288 1.31235 10.7718 1.41381 10.6703C1.51527 10.5688 1.57227 10.4312 1.57227 10.2877V8.66469H2.6543V10.0639C2.65385 10.206 2.68165 10.3469 2.7361 10.4782C2.79055 10.6095 2.87056 10.7286 2.97147 10.8288L4.65504 12.5123Z"
              fill={
                settings.carSettings.engineHasProblem ? "#040F0A" : "#898989"
              }
            />
          </svg>
          <svg
            width="17"
            height="13"
            viewBox="0 0 17 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2.32434 12.4471C2.35746 12.6547 2.53656 12.8075 2.74683 12.8075H13.6789C14.2564 12.8075 14.8212 12.585 15.2127 12.1593C15.3077 12.0563 15.3952 11.9423 15.479 11.8237H2.22491L2.32434 12.4471ZM2.08616 10.4058H15.7687C15.8868 10.4058 15.9965 10.4376 16.0945 10.4889C16.3973 9.37328 16.3303 8.04818 15.7368 6.88411C15.5934 6.60389 15.3774 6.36642 15.125 6.18032L9.87541 2.31265C8.49564 1.29866 6.82919 0.748901 5.11571 0.748901H0.960157C0.696976 0.748901 0.49621 0.984239 0.537666 1.24412L2.00019 10.4145C2.02869 10.411 2.05671 10.4058 2.08616 10.4058ZM5.19927 7.94653C5.19927 8.02506 5.13562 8.08871 5.05709 8.08871H2.97738C2.89886 8.08871 2.83521 8.02506 2.83521 7.94653V7.61346C2.83521 7.53493 2.89886 7.47128 2.97738 7.47128H5.05712C5.13562 7.47128 5.1993 7.53493 5.1993 7.61346L5.19927 7.94653ZM5.11571 1.81851C6.60886 1.81851 8.0357 2.28699 9.24221 3.17476L12.6221 5.66479H2.32619L1.71226 1.81851H5.11571ZM15.7687 10.7408H2.08622C1.87969 10.7408 1.71226 10.9082 1.71226 11.1147C1.71226 11.3213 1.87969 11.4887 2.08622 11.4887H15.7687C15.9752 11.4887 16.1427 11.3213 16.1427 11.1147C16.1427 10.9082 15.9752 10.7408 15.7687 10.7408Z"
              fill={settings.carSettings.doorIsOpen ? "#040F0A" : "#898989"}
            />
          </svg>
        </div>
        <div className="flex flex-col items-center justify-start">
          <div className="flex items-center justify-end">
            {speed < 100 && speed !== 0 && (
              <span className="text-black leading-none text-opacity-30 text-[61.95px] font-extrabold font-['Orbitron']">
                0
              </span>
            )}
            <span className="text-black leading-none text-[61.95px] font-extrabold font-['Orbitron']">
              {speed}
            </span>
          </div>
          <div className=" text-black text-[17.8px] font-extrabold font-['Orbitron']">
            {settings.speedometers.units.toLocaleUpperCase()}
          </div>
        </div>
      </div>
      <div className="flex items-center justify-between w-40">
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 1 ? "text-black" : "text-zinc-500"
          )}
        >
          1
        </div>
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 2 ? "text-black" : "text-zinc-500"
          )}
        >
          2
        </div>
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 3 ? "text-black" : "text-zinc-500"
          )}
        >
          3
        </div>
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 4 ? "text-black" : "text-zinc-500"
          )}
        >
          4
        </div>
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 5 ? "text-black" : "text-zinc-500"
          )}
        >
          5
        </div>
        <div
          className={clsx(
            "text-center text-[17.49px] font-extrabold font-['Orbitron']",
            gear === 6 ? "text-black" : "text-zinc-500"
          )}
        >
          6
        </div>
      </div>
    </div>
  );
};

export default SpeedoMeter2;
